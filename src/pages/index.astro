---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { TaskManager } from '../components/TaskManager';
import { WhatsAppCounter } from '../components/WhatsAppCounter';
import { WhatsAppChatList } from '../components/WhatsAppChatList';
import { WhatsAppBrief } from '../components/WhatsAppBrief';

// Make this page server-side rendered to support API calls
export const prerender = false;
---

<BaseLayout>
	<title>AI Task Manager</title>
	<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	<meta name="generator" content={Astro.generator} />
	
	<Fragment slot="body">
		<div class="min-h-screen bg-gray-50 py-8">
			<div class="container mx-auto px-4">
				<h1 class="text-3xl font-bold text-center text-gray-900 mb-8">
					AI Task Manager
				</h1>
				
				<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
					<!-- WhatsApp Counter -->
					<div class="lg:col-span-1">
						<WhatsAppCounter client:load />
					</div>
					
					<!-- WhatsApp Chat List -->
					<div class="lg:col-span-2">
						<WhatsAppChatList client:load />
					</div>
					
					<!-- AI Brief - Full Width -->
					<div class="lg:col-span-3">
						<WhatsAppBrief client:load />
					</div>
				</div>
			</div>
		</div>
	</Fragment>
</BaseLayout>
